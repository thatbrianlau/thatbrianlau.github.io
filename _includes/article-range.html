{% assign counter = 0 %}

{%- for post in site.posts -%}
  {%- assign filter = false -%}

  {%- if include.name -%}
    {%- for category in post.categories -%}
      {%- if category == include.name -%}
        {%- assign filter = true -%}
      {%- endif -%}
    {%- endfor -%}
  {%- else -%}
    {%- assign filter = true -%}
  {%- endif -%}

  {%- if filter -%}
    {% assign counter = counter | plus: 1 %}
    {%- include article-item.html class=include.class -%}
  {% endif -%}

  {%- if counter >= include.limit -%}
    {% break %}
  {% endif -%}

{%- endfor -%}

